#
# BeGadu Jamrules, v1.0
# Ten plik jest częścią kodu źródłowego BeGadu
# http://begadu.sf.net
#

VERSION = 20051130 ;
C++FLAGS += -I/boot/home/config/include -DDEBUG -DVERSION=\\\"$(VERSION)\\\" -I./include -g -Wno-multichar -O0 ;
CCFLAGS = $(C++FLAGS) ;

# po zlinkowaniu programu, dodaj resy
actions Link bind NEEDLIBS
{
	$(LINK) $(LINKFLAGS) -o $(1) $(UNDEPS) $(2) $(NEEDLIBS) $(LINKLIBS)
	xres -o $(1) $(RESOURCE)
	mimeset -f $(1)
}

rule BinPackage
{
	BuildBinPackage $(1) ;
}

actions BuildBinPackage
{
	rm -rf tmp BeGadu-$(VERSION)-bin
	mkdir tmp
	cp BeGadu tmp
	strip tmp/BeGadu
	mimeset -f tmp/*
	mv tmp BeGadu-$(VERSION)-bin
	zip -r -9 $(1) BeGadu-$(VERSION)-bin
	rm -rf BeGadu-$(VERSION)-bin
}

rule SourcePackage
{
	BuildSourcePackage $(1) ;
}

actions BuildSourcePackage
{
	rm -rf tmp BeGadu-$(VERSION)
	mkdir tmp
	mkdir tmp/include
	mkdir tmp/lib
	mkdir tmp/src
	cp include/* tmp/include
	cp lib/* tmp/lib
	cp src/*.cpp tmp/src
	cp src/*.c tmp/src
	cp Jamrules Jamfile BeGadu.rsrc tmp/
	mv tmp BeGadu-$(VERSION)
	zip -r -9 $(1) BeGadu-$(VERSION)
	rm -rf BeGadu-$(VERSION)
}
	
